function generate_map(o,e,n,t){var a=new google.maps.Map(document.getElementById(o),{center:e.center,zoom:Number(e.zoom)}),r=[],s=new google.maps.LatLngBounds,c=new google.maps.InfoWindow;jQuery.each(n,function(o,e){e.map=a;var n=new google.maps.Marker(e);r.push(n),s.extend(e.position),n.addListener("click",function(){c.setContent(t[o].content),c.open(a,n)})}),google.maps.event.addListenerOnce(a,"bounds_changed",function(){this.getZoom()>15&&this.setZoom(15)}),a.fitBounds(s),gmMaps[o]={map:a,markers:r,infoWindow:c}}function userLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(o){gmMaps.userLocation={position:o},addressFromLocation(o.coords.latitude,o.coords.longitude)},userLocationError)}function userLocationError(o){var e="";switch(o.code){case o.PERMISSION_DENIED:e="User denied the request for Geolocation.";break;case o.POSITION_UNAVAILABLE:e="Location information is unavailable.";break;case o.TIMEOUT:e="The request to get user location timed out.";break;case o.UNKNOWN_ERROR:e="An unknown error occurred."}gmMaps.userLocation={status:"error",code:o.code,message:e}}function addressFromLocation(o,e){var n=new google.maps.Geocoder,t=new google.maps.LatLng(o,e);n.geocode({latLng:t},function(o,e){e==google.maps.GeocoderStatus.OK&&o[0]&&(gmMaps.userLocation.address=o[0].formatted_address)})}var gmMaps={},geocoder=new google.maps.Geocoder;jQuery(document).ready(function(o){userLocation()});